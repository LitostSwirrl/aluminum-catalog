import{e as w,c as g,a as o,i as v,o as i,F as k,r as C,u as n,t as y,j as _,k as A,n as R,d as B,h as b,g as F,w as L,A as q,D as N,E as Q,b as S}from"./BJ3dvgAQ.js";import{_ as O}from"./BbFu0XeA.js";import{c as z}from"./Baxe5T8q.js";import{u as V}from"./BBfafzwf.js";import{_ as E}from"./DTadWa37.js";import{_ as M}from"./D__pMZrc.js";import{u as Y}from"./CfOlva66.js";import{u as U}from"./NrYPYddM.js";const D={class:"relative"},G=["value"],P=w({__name:"CatalogSearch",props:{modelValue:{}},emits:["update:modelValue"],setup(t){return(a,e)=>(i(),g("div",D,[e[3]||(e[3]=o("svg",{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-catalog-muted",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),o("input",{type:"text",value:t.modelValue,placeholder:"Search artists, titles, materials...",class:"w-full rounded-lg border border-catalog-border bg-catalog-surface py-2.5 pl-10 pr-4 text-sm text-catalog-text placeholder:text-catalog-muted/60 focus:border-catalog-accent focus:outline-none focus:ring-1 focus:ring-catalog-accent",onInput:e[0]||(e[0]=l=>a.$emit("update:modelValue",l.target.value))},null,40,G),t.modelValue?(i(),g("button",{key:0,class:"absolute right-3 top-1/2 -translate-y-1/2 text-catalog-muted hover:text-catalog-text",onClick:e[1]||(e[1]=l=>a.$emit("update:modelValue",""))},[...e[2]||(e[2]=[o("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M6 18L18 6M6 6l12 12"})],-1)])])):v("",!0)]))}}),H=Object.assign(P,{__name:"CatalogSearch"}),I={class:"space-y-6"},J={class:"flex items-center justify-between"},K={class:"mt-3 flex flex-wrap gap-2"},W=["onClick"],X={class:"mt-3 flex flex-wrap gap-1.5"},Z=w({__name:"CatalogFilters",props:{activeCategories:{},activeTags:{},allTags:{},activeFilterCount:{}},emits:["toggleCategory","toggleTag","clearAll"],setup(t,{emit:a}){const e=t,l=a,{getCategoryColor:c}=V(),d=_(!1),s=F(()=>d.value?e.allTags:e.allTags.slice(0,12));return(h,f)=>{const p=O;return i(),g("div",I,[o("div",null,[o("div",J,[f[2]||(f[2]=o("h3",{class:"text-xs font-semibold uppercase tracking-widest text-catalog-muted"},"Categories",-1)),t.activeFilterCount>0?(i(),g("button",{key:0,class:"text-xs text-catalog-muted underline hover:text-catalog-text",onClick:f[0]||(f[0]=u=>l("clearAll"))}," Clear all ")):v("",!0)]),o("div",K,[(i(!0),g(k,null,C(n(z),u=>(i(),g("button",{key:u.slug,class:R(["flex items-center gap-1.5 rounded-full border px-3 py-1.5 text-xs font-medium transition-all",t.activeCategories.includes(u.slug)?"border-transparent text-white":"border-catalog-border text-catalog-muted hover:border-catalog-accent hover:text-catalog-text"]),style:A(t.activeCategories.includes(u.slug)?{backgroundColor:n(c)(u.slug)}:{}),onClick:x=>l("toggleCategory",u.slug)},[t.activeCategories.includes(u.slug)?v("",!0):(i(),g("span",{key:0,class:"h-2 w-2 rounded-full",style:A({backgroundColor:n(c)(u.slug)})},null,4)),B(" "+y(u.name),1)],14,W))),128))])]),o("div",null,[f[3]||(f[3]=o("h3",{class:"text-xs font-semibold uppercase tracking-widest text-catalog-muted"},"Tags",-1)),o("div",X,[(i(!0),g(k,null,C(n(s),u=>(i(),b(p,{key:u,label:u,active:t.activeTags.includes(u),clickable:"",onClick:x=>l("toggleTag",u)},null,8,["label","active","onClick"]))),128))]),t.allTags.length>12?(i(),g("button",{key:0,class:"mt-2 text-xs text-catalog-muted underline hover:text-catalog-text",onClick:f[1]||(f[1]=u=>d.value=!n(d))},y(n(d)?"Show fewer":`Show all ${t.allTags.length} tags`),1)):v("",!0)])])}}}),tt=Object.assign(Z,{__name:"CatalogFilters"}),et={class:"relative aspect-[4/3] overflow-hidden bg-gray-100"},at=["src","alt"],ot={class:"p-4"},rt={class:"text-xs font-medium uppercase tracking-wider text-catalog-muted"},lt={class:"mt-1 font-serif text-base font-semibold leading-snug text-catalog-text line-clamp-2"},st={class:"mt-1 text-xs text-catalog-muted"},nt={class:"mt-3 flex flex-wrap gap-1"},it=w({__name:"CatalogCard",props:{artwork:{}},setup(t){const{getCategoryColor:a}=V(),e=_(!1);return(l,c)=>{const d=E,s=M;return i(),b(s,{to:`/catalog/${t.artwork.slug}`,class:"group block overflow-hidden rounded-lg border border-catalog-border bg-catalog-surface transition-all hover:border-catalog-accent/30 hover:shadow-lg"},{default:L(()=>[o("div",et,[t.artwork.imageUrl&&!n(e)?(i(),g("img",{key:0,src:t.artwork.imageUrl,alt:t.artwork.title,loading:"lazy",class:"h-full w-full object-cover transition-transform duration-500 group-hover:scale-105",onError:c[0]||(c[0]=h=>e.value=!0)},null,40,at)):(i(),b(d,{key:1,title:t.artwork.title,artist:t.artwork.artist,year:t.artwork.year,category:t.artwork.category,size:"md"},null,8,["title","artist","year","category"])),o("span",{class:"absolute left-3 top-3 h-2.5 w-2.5 rounded-full ring-2 ring-white",style:A({backgroundColor:n(a)(t.artwork.category)})},null,4)]),o("div",ot,[o("p",rt,y(t.artwork.artist),1),o("h3",lt,y(t.artwork.title),1),o("p",st,y(t.artwork.year)+" · "+y(t.artwork.medium),1),o("div",nt,[(i(!0),g(k,null,C(t.artwork.tags.slice(0,3),h=>(i(),g("span",{key:h,class:"rounded-full bg-catalog-bg px-2 py-0.5 text-[10px] text-catalog-muted"},y(h),1))),128))])])]),_:1},8,["to"])}}}),ct=Object.assign(it,{__name:"CatalogCard"}),ut={key:0,class:"py-24 text-center"},gt={key:1,class:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"},dt={class:"mt-6 text-center text-xs text-catalog-muted"},mt=w({__name:"CatalogGrid",props:{artworks:{}},setup(t){return(a,e)=>{const l=ct;return i(),g("div",null,[t.artworks.length===0?(i(),g("div",ut,[...e[0]||(e[0]=[o("p",{class:"font-serif text-xl text-catalog-muted"},"No works match your filters",-1),o("p",{class:"mt-2 text-sm text-catalog-muted/70"},"Try adjusting your search or clearing filters",-1)])])):(i(),g("div",gt,[(i(!0),g(k,null,C(t.artworks,c=>(i(),b(l,{key:c.id,artwork:c},null,8,["artwork"]))),128))])),o("p",dt," Showing "+y(t.artworks.length)+" work"+y(t.artworks.length!==1?"s":""),1)])}}}),ft=Object.assign(mt,{__name:"CatalogGrid"});function xt(t,a){return a.length===0?t:t.filter(e=>a.includes(e.category))}function yt(t,a){return a.length===0?t:t.filter(e=>a.some(l=>e.tags.includes(l)))}function ht(t,a){return t.filter(e=>e.yearSort>=a[0]&&e.yearSort<=a[1])}function pt(t,a){if(!a.trim())return t;const e=a.toLowerCase().trim();return t.filter(l=>l.title.toLowerCase().includes(e)||l.artist.toLowerCase().includes(e)||l.medium.toLowerCase().includes(e)||l.tags.some(c=>c.toLowerCase().includes(e))||l.description.toLowerCase().includes(e))}function vt(t,a){let e=t;return e=xt(e,a.categories),e=yt(e,a.tags),e=ht(e,a.yearRange),e=pt(e,a.searchQuery),e}function wt(t){const a=new Set;for(const e of t)for(const l of e.tags)a.add(l);return[...a].sort()}function kt(t){if(t.length===0)return[1900,2025];const a=t.map(e=>e.yearSort);return[Math.min(...a),Math.max(...a)]}function Ct(){const t=N(),a=Q(),{artworks:e}=U(),l=wt(e),[c,d]=kt(e),s=_({categories:j(t.query.categories),tags:j(t.query.tags),yearRange:[Number(t.query.yearFrom)||c,Number(t.query.yearTo)||d],searchQuery:t.query.q||""}),h=F(()=>vt(e,s.value)),f=F(()=>{let r=0;return s.value.categories.length>0&&r++,s.value.tags.length>0&&r++,(s.value.yearRange[0]!==c||s.value.yearRange[1]!==d)&&r++,s.value.searchQuery.trim()&&r++,r});q(s,r=>{const m={};r.categories.length>0&&(m.categories=r.categories.join(",")),r.tags.length>0&&(m.tags=r.tags.join(",")),r.yearRange[0]!==c&&(m.yearFrom=String(r.yearRange[0])),r.yearRange[1]!==d&&(m.yearTo=String(r.yearRange[1])),r.searchQuery.trim()&&(m.q=r.searchQuery),a.replace({query:m})},{deep:!0});function p(r){const m=s.value.categories.indexOf(r);m>=0?s.value.categories.splice(m,1):s.value.categories.push(r)}function u(r){const m=s.value.tags.indexOf(r);m>=0?s.value.tags.splice(m,1):s.value.tags.push(r)}function x(r){s.value.searchQuery=r}function $(r){s.value.yearRange=r}function T(){s.value={categories:[],tags:[],yearRange:[c,d],searchQuery:""}}return{filters:s,filteredArtworks:h,activeFilterCount:f,allTags:l,minYear:c,maxYear:d,toggleCategory:p,toggleTag:u,setSearch:x,setYearRange:$,clearAll:T}}function j(t){return t?t.split(",").filter(Boolean):[]}const bt={class:"mx-auto max-w-7xl px-6 py-12"},_t={class:"flex flex-col gap-6 md:flex-row md:items-end md:justify-between"},$t={class:"w-full max-w-sm"},Tt={key:0,class:"flex h-4 w-4 items-center justify-center rounded-full bg-catalog-accent text-[10px] text-white"},St={class:"mt-8 grid gap-10 lg:grid-cols-[280px_1fr]"},Nt=w({__name:"index",setup(t){Y({title:"Catalog — Aluminum Extrusion Art Catalog"});const{filters:a,filteredArtworks:e,activeFilterCount:l,allTags:c,toggleCategory:d,toggleTag:s,setSearch:h,clearAll:f}=Ct(),p=_(!1);return(u,x)=>{const $=H,T=tt,r=ft;return i(),g("div",bt,[o("div",_t,[x[1]||(x[1]=o("div",null,[o("p",{class:"text-xs font-semibold uppercase tracking-[0.2em] text-catalog-muted"},"Browse"),o("h1",{class:"mt-1 font-serif text-3xl font-bold text-catalog-text md:text-4xl"},"Catalog")],-1)),o("div",$t,[S($,{"model-value":n(a).searchQuery,"onUpdate:modelValue":n(h)},null,8,["model-value","onUpdate:modelValue"])])]),o("button",{class:"mt-6 flex items-center gap-2 rounded-full border border-catalog-border px-4 py-2 text-xs font-medium text-catalog-muted transition-colors hover:text-catalog-text md:hidden",onClick:x[0]||(x[0]=m=>p.value=!n(p))},[x[2]||(x[2]=B(" Filters ",-1)),n(l)>0?(i(),g("span",Tt,y(n(l)),1)):v("",!0)]),o("div",St,[o("aside",{class:R(["lg:block",n(p)?"block":"hidden"])},[S(T,{"active-categories":n(a).categories,"active-tags":n(a).tags,"all-tags":n(c),"active-filter-count":n(l),onToggleCategory:n(d),onToggleTag:n(s),onClearAll:n(f)},null,8,["active-categories","active-tags","all-tags","active-filter-count","onToggleCategory","onToggleTag","onClearAll"])],2),S(r,{artworks:n(e)},null,8,["artworks"])])])}}});export{Nt as default};
